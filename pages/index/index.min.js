
window.addEventListener('DOMContentLoaded', function () {

let cards = document.querySelectorAll('.card');
if (window.matchMedia("(max-width: 992px)").matches) {
	for (let i = 4; i < cards.length; i++) {
		cards[i].style.display = 'none';
	}
}

let chooseBtn = document.querySelector('.jsScroll');

chooseBtn.addEventListener('click', function(event) {
	event.preventDefault();
	animate(function (timePassed) {
		let target = event.target;
		let section = document.querySelector('.catalog__title');
		window.scrollBy(0, section.getBoundingClientRect().top / 10 - 4);
	}, 1200);
});

function animate(draw, duration) {
	let start = performance.now();
	requestAnimationFrame(
		function animate(time) {
			let timePassed = time - start;
			if (timePassed > duration) {
				timePassed = duration;
			}
			draw(timePassed);

			if (timePassed < duration) {
				requestAnimationFrame(animate);
			}
		});
};


});

// $(document).ready(function () {

//     $('.jsClosePopup').click(function () {
//         $('.overlay').fadeOut();
//     });

//     $('.jsShowCallback').click(function () {
//         $('#callback').fadeIn();
//     });
//     $('.jsShowThx').click(function () {
//         $('#thx').fadeIn();
//     });

//     $(window).trigger('scroll');

//     scroll();

//     function scroll() {

//         let menu = document.getElementsByClassName('menu')[0];
//         let footerNav = document.getElementsByClassName('footer__nav')[0];


//         menu.addEventListener('click', showAnchor);
//         footerNav.addEventListener('click', showAnchor);

//         function showAnchor(event) {
//             event.preventDefault();
//             animate(function (timePassed) {
//                 let target = event.target;
//                 let section = document.getElementById(target.getAttribute('href').slice(1));
//                 window.scrollBy(0, section.getBoundingClientRect().top / 10);
//             }, 1500);
//         }

//         function animate(draw, duration) {
//             let start = performance.now();
//             requestAnimationFrame(
//                 function animate(time) {
//                     let timePassed = time - start;
//                     if (timePassed > duration) {
//                         timePassed = duration;
//                     }
//                     draw(timePassed);

//                     if (timePassed < duration) {
//                         requestAnimationFrame(animate);
//                     }
//                 });
//         }

//     }
// });

// function offset(el) {
//     var rect = el.getBoundingClientRect(),
//         scrollLeft = window.pageXOffset || document.documentElement.scrollLeft,
//         scrollTop = window.pageYOffset || document.documentElement.scrollTop;
//     return { top: rect.top + scrollTop, left: rect.left + scrollLeft }
// }
window.addEventListener('DOMContentLoaded', function () {

	const popup = document.querySelector('.popupWrap');
	const popupClose = document.querySelector('.jsClosePopup');
	const cards = document.querySelectorAll('.jsShowPopup');

	const showModal = function() {
		popup.style.display = 'block';
		// document.body.style.overflow = 'hidden';
	};

	cards.forEach(card => {
		card.addEventListener('click', showModal)
	});

	popupClose.addEventListener('click', () => {
		popup.style.display = 'none';
		// document.body.style.overflow = '';
	});

});

// $(document).ready(function () {
//     $(".menu__item, [data-scroll]").on("click", function (e) {
//         e.preventDefault();

//         var id = $(this).attr('href') || $(this).attr('data-scroll');
//         if (id) {
//             var top = $(id).offset().top;
//             $('body,html').animate({scrollTop: top}, 1500);
//         }

//         var target = $(this).attr('data-target');
//         if (target) {
//             yaCounter51455630.reachGoal(`${target}`);
//         }
//     });
// });

window.addEventListener('DOMContentLoaded', function () {
	const burger = document.querySelector('.jsShowMenu');
	const menu = document.querySelector('.jsMainMenu');

	burger.addEventListener('click', () => {
		menu.classList.toggle('fadeIn');
		menu.classList.toggle('fadeOut');
		setTimeout(function() {
		burger.classList.toggle('on');
		menu.classList.toggle('show');
		}, 1000);
	});
});

window.addEventListener('DOMContentLoaded', function () {

	let galleryItem = document.querySelectorAll('.jsGalleryItem');
	let galleryMain = document.querySelector('.jsGalleryMain');
	let galleryGrid = document.querySelector('.jsGalleryGrid');

	galleryGrid.addEventListener('click', event => {
		let target = event.target;
		// console.log(target.classList);

		if(target.classList.contains('jsGalleryItem')) {

			for (let i = 0; i < galleryItem.length; i++) {
				
				if (target == galleryItem[i]) {
					// alert(i);
					showGalleryItem(i);
					break;
				}
			}
		}
	});

	function showGalleryItem(n) {
		// console.log(galleryItem[n].src);
		galleryMain.src = galleryItem[n].src;
	};









	// galleryItem.forEach(function(item) {
	// 	console.log( item.src );
	// 	item.src = 'http://cruise.loc/common/catalog/img/abrau.jpg';
	// });

});
